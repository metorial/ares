model App {
  oid BigInt @id
  id  String @unique

  clientId String @unique
  slug     String? @unique

  hasTerms Boolean @default(true)

  defaultRedirectUrl String

  defaultTenantOid BigInt?
  defaultTenant    Tenant? @relation(fields: [defaultTenantOid], references: [oid], onDelete: SetNull, name: "DefaultTenant")

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt

  tenants                Tenant[]
  users                  User[]
  authIntents            AuthIntent[]
  authAttempts           AuthAttempt[]
  authDeviceUserSessions AuthDeviceUserSession[]
  emailDomains           EmailDomain[]
  userEmails             UserEmail[]
  oauthProviders         AppOAuthProvider[]
  surfaces               AppSurface[]
}

model AppSurface {
  oid BigInt @id
  id  String @unique

  clientId String @unique

  appOid BigInt
  app    App    @relation(fields: [appOid], references: [oid], onDelete: Cascade)

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}
